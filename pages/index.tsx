import Head from 'next/head'
import Image from 'next/image'
// import { useTokenStore } from '';
import { useTokenStore } from './../utils/useTokenStore';
import { AppProps } from 'next/app';
import { InferGetStaticPropsType } from 'next';
import { useRouter } from 'next/dist/client/router';
import { useEffect } from 'react';

const API_URL: string = 'https://jsonplaceholder.typicode.com/posts'

export default function Home(data: InferGetStaticPropsType<typeof getStaticProps>) {
  // console.log("%c ðŸ’†â€â™‚ï¸: Home -> data ",
  //   "font-size:16px;background-color:#f9e161;color:black;",
  //   data)
  const router = useRouter()

  const token =
    useTokenStore((state) => state.token);



  useEffect(() => {
    if (router && token === '')
      router.push('/auth/sign-in')
    return () => {

    }
  }, [])

  return (

    <div  >

      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main  >
        <h1  >
          Welcome to <a href="https://nextjs.org">Next.js!</a>
        </h1>
        <h1>{token || 'No token set.'}</h1>
      </main>
      <footer  >

      </footer>
    </div>
  )
}

export async function getStaticProps() {
  const res = await fetch(API_URL)
  const posts: String = await res.json()

  return {
    props: {
      posts,
    },
  }
}